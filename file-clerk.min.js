(()=>{var e={790:function(e,t,r){e.exports=(function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){if(o)return o(a,!0);var f=Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o=void 0,a=0;a<n.length;a++)i(n[a]);return i})({1:[function(e,t,n){(function(e){"use strict";var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var f=new e.MessageChannel;f.port1.onmessage=c,r=function(){f.port2.postMessage(0)}}var l=[];function c(){n=!0;for(var e,t,r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}n=!1}t.exports=function(e){1!==l.push(e)||n||r()}}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var n=e(1);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],f=["PENDING"];function l(e){if("function"!=typeof e)throw TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function c(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function u(e,t,r){n(function(){var n;try{n=t(r)}catch(t){return o.reject(e,t)}n===e?o.reject(e,TypeError("Cannot resolve promise with itself")):o.resolve(e,n)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var r=!1;function n(t){r||(r=!0,o.reject(e,t))}function i(t){r||(r=!0,o.resolve(e,t))}var a=p(function(){t(i,n)});"error"===a.status&&n(a.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(i);return this.state!==f?u(r,this.state===s?e:t,this.outcome):this.queue.push(new c(r,e,t)),r},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=p(d,t);if("error"===r.status)return o.reject(e,r.value);var n=r.value;if(n)h(e,n);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return o.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=Array(r),s=0,f=-1,l=new this(i);++f<r;)!function(e,i){t.resolve(e).then(function(e){a[i]=e,++s!==r||n||(n=!0,o.resolve(l,a))},function(e){n||(n=!0,o.reject(l,e))})}(e[f],f);return l},l.race=function(e){var t,r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var n=e.length,a=!1;if(!n)return this.resolve([]);for(var s=-1,f=new this(i);++s<n;){t=e[s],r.resolve(t).then(function(e){a||(a=!0,o.resolve(f,e))},function(e){a||(a=!0,o.reject(f,e))})}return f}},{1:1}],3:[function(e,t,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function s(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function f(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function l(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function c(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var u="local-forage-detect-blob-support",d=void 0,h={},p=Object.prototype.toString,v="readonly",m="readwrite";function y(e){var t=h[e.name],r={};r.promise=new a(function(e,t){r.resolve=e,r.reject=t}),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then(function(){return r.promise}):t.dbReady=r.promise}function b(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function g(e,t){var r=h[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function w(e,t){return new a(function(r,n){if(h[e.name]=h[e.name]||A(),e.db)if(!t)return r(e.db);else y(e),e.db.close();var o=[e.name];t&&o.push(e.version);var a=i.open.apply(i,o);t&&(a.onupgradeneeded=function(t){var r=a.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(u)}catch(r){if("ConstraintError"===r.name)console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw r}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},r(t),b(e)}})}function E(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,i=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function _(e){return o([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}(atob(e.data))],{type:e.type})}function x(e){return e&&e.__local_forage_encoded_blob}function S(e){var t=this,r=t._initReady().then(function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return f(r,e,e),r}function I(e,t,r,n){void 0===n&&(n=1);try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(i){if(n>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return a.resolve().then(function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),w(e,!0)}).then(function(){return(function(e){y(e);for(var t=h[e.name],r=t.forages,n=0;n<r.length;n++){var i=r[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,w(e,!1).then(function(t){return(e.db=t,E(e))?w(e,!0):t}).then(function(n){e.db=t.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n}).catch(function(t){throw g(e,t),t})})(e).then(function(){I(e,t,r,n-1)})}).catch(r);r(i)}}function A(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}var B={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var i=h[r.name];i||(i=A(),h[r.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=S);var o=[];function s(){return a.resolve()}for(var f=0;f<i.forages.length;f++){var l=i.forages[f];l!==t&&o.push(l._initReady().catch(s))}var c=i.forages.slice(0);return a.all(o).then(function(){return r.db=i.db,w(r,!1)}).then(function(e){return(r.db=e,E(r,t._defaultConfig.version))?w(r,!0):e}).then(function(e){r.db=i.db=e,t._dbInfo=r;for(var n=0;n<c.length;n++){var o=c[n];o!==t&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}})},_support:function(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=new a(function(t,n){r.ready().then(function(){I(r._dbInfo,v,function(i,o){if(i)return n(i);try{var a=o.objectStore(r._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;x(n)&&(n=_(n));var i=e(n,r.key,s++);void 0!==i?t(i):r.continue()}else t()},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return s(n,t),n},getItem:function(e,t){var r=this;e=l(e);var n=new a(function(t,n){r.ready().then(function(){I(r._dbInfo,v,function(i,o){if(i)return n(i);try{var a=o.objectStore(r._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),x(e)&&(e=_(e)),t(e)},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return s(n,t),n},setItem:function(e,t,r){var n=this;e=l(e);var i=new a(function(r,i){var s;n.ready().then(function(){return(s=n._dbInfo,"[object Blob]"===p.call(t))?(function(e){return"boolean"==typeof d?a.resolve(d):new a(function(t){var r=e.transaction(u,m),n=o([""]);r.objectStore(u).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);t(navigator.userAgent.match(/Edge\//)||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1}).then(function(e){return d=e})})(s.db).then(function(e){return e?t:new a(function(e,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){e({__local_forage_encoded_blob:!0,data:btoa(r.target.result||""),type:t.type})},n.readAsBinaryString(t)})}):t}).then(function(t){I(n._dbInfo,m,function(o,a){if(o)return i(o);try{var s=a.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var f=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),r(t)},a.onabort=a.onerror=function(){var e=f.error?f.error:f.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return s(i,r),i},removeItem:function(e,t){var r=this;e=l(e);var n=new a(function(t,n){r.ready().then(function(){I(r._dbInfo,m,function(i,o){if(i)return n(i);try{var a=o.objectStore(r._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){n(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return s(n,t),n},clear:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){I(t._dbInfo,m,function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return s(r,e),r},length:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){I(t._dbInfo,v,function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){r(o.error)}}catch(e){r(e)}})}).catch(r)});return s(r,e),r},key:function(e,t){var r=this,n=new a(function(t,n){e<0?t(null):r.ready().then(function(){I(r._dbInfo,v,function(i,o){if(i)return n(i);try{var a=o.objectStore(r._dbInfo.storeName),s=!1,f=a.openKeyCursor();f.onsuccess=function(){var r=f.result;r?0===e||s?t(r.key):(s=!0,r.advance(e)):t(null)},f.onerror=function(){n(f.error)}}catch(e){n(e)}})}).catch(n)});return s(n,t),n},keys:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){I(t._dbInfo,v,function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var t=o.result;t?(a.push(t.key),t.continue()):e(a)},o.onerror=function(){r(o.error)}}catch(e){r(e)}})}).catch(r)});return s(r,e),r},dropInstance:function(e,t){t=c.apply(this,arguments);var r,n=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName),e.name){var o=e.name===n.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):w(e,!1).then(function(t){var r=h[e.name],n=r.forages;r.db=t;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=t;return t});r=e.storeName?o.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;y(e);var n=h[e.name],o=n.forages;t.close();for(var s=0;s<o.length;s++){var f=o[s];f._dbInfo.db=null,f._dbInfo.version=r}return new a(function(t,n){var o=i.open(e.name,r);o.onerror=function(e){o.result.close(),n(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<o.length;t++){var r=o[t];r._dbInfo.db=e,b(r._dbInfo)}}).catch(function(t){throw(g(e,t)||a.resolve()).catch(function(){}),t})}}):o.then(function(t){y(e);var r=h[e.name],n=r.forages;t.close();for(var o=0;o<n.length;o++)n[o]._dbInfo.db=null;return new a(function(t,r){var n=i.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<n.length;t++)b(n[t]._dbInfo)}).catch(function(t){throw(g(e,t)||a.resolve()).catch(function(){}),t})})}else r=a.reject("Invalid arguments");return s(r,t),r}},U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=/^~~local_forage_type~([^~]+)~/,F="__lfsc__:",L=F.length,O="arbf",D="blob",j="si08",k="ui08",C="uic8",R="si16",M="si32",z="ur16",T="ui32",P="fl32",$="fl64",W=L+O.length,q=Object.prototype.toString;function H(e){var t,r,n,i,o,a=.75*e.length,s=e.length,f=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),c=new Uint8Array(l);for(t=0;t<s;t+=4)r=U.indexOf(e[t]),n=U.indexOf(e[t+1]),i=U.indexOf(e[t+2]),o=U.indexOf(e[t+3]),c[f++]=r<<2|n>>4,c[f++]=(15&n)<<4|i>>2,c[f++]=(3&i)<<6|63&o;return l}function V(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=U[r[t]>>2],n+=U[(3&r[t])<<4|r[t+1]>>4],n+=U[(15&r[t+1])<<2|r[t+2]>>6],n+=U[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var J={serialize:function(e,t){var r="";if(e&&(r=q.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===q.call(e.buffer))){var n,i=F;e instanceof ArrayBuffer?(n=e,i+=O):(n=e.buffer,"[object Int8Array]"===r?i+=j:"[object Uint8Array]"===r?i+=k:"[object Uint8ClampedArray]"===r?i+=C:"[object Int16Array]"===r?i+=R:"[object Uint16Array]"===r?i+=z:"[object Int32Array]"===r?i+=M:"[object Uint32Array]"===r?i+=T:"[object Float32Array]"===r?i+=P:"[object Float64Array]"===r?i+=$:t(Error("Failed to get type for BinaryArray"))),t(i+V(n))}else if("[object Blob]"===r){var o=new FileReader;o.onload=function(){t(F+D+("~~local_forage_type~"+e.type+"~")+V(this.result))},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},deserialize:function(e){if(e.substring(0,L)!==F)return JSON.parse(e);var t,r=e.substring(W),n=e.substring(L,W);if(n===D&&N.test(r)){var i=r.match(N);t=i[1],r=r.substring(i[0].length)}var a=H(r);switch(n){case O:return a;case D:return o([a],{type:t});case j:return new Int8Array(a);case k:return new Uint8Array(a);case C:return new Uint8ClampedArray(a);case R:return new Int16Array(a);case z:return new Uint16Array(a);case M:return new Int32Array(a);case T:return new Uint32Array(a);case P:return new Float32Array(a);case $:return new Float64Array(a);default:throw Error("Unkown type: "+n)}},stringToBuffer:H,bufferToString:V};function K(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function G(e,t,r,n,i,o){e.executeSql(r,n,i,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,s){s.rows.length?o(e,a):K(e,t,function(){e.executeSql(r,n,i,o)},o)},o):o(e,a)},o)}function Q(e,t,r,n){var i=this;e=l(e);var o=new a(function(o,a){i.ready().then(function(){void 0===t&&(t=null);var s=t,f=i._dbInfo;f.serializer.serialize(t,function(t,l){l?a(l):f.db.transaction(function(r){G(r,f,"INSERT OR REPLACE INTO "+f.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){o(s)},function(e,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void o(Q.apply(i,[e,s,r,n-1]));a(t)}})})}).catch(a)});return s(o,r),o}var X={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var i=new a(function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction(function(i){K(i,r,function(){t._dbInfo=r,e()},function(e,t){n(t)})},n)});return r.serializer=J,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,n=new a(function(t,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){G(r,i,"SELECT * FROM "+i.storeName,[],function(r,n){for(var o=n.rows,a=o.length,s=0;s<a;s++){var f=o.item(s),l=f.value;if(l&&(l=i.serializer.deserialize(l)),void 0!==(l=e(l,f.key,s+1)))return void t(l)}t()},function(e,t){n(t)})})}).catch(n)});return s(n,t),n},getItem:function(e,t){var r=this;e=l(e);var n=new a(function(t,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){G(r,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),t(n)},function(e,t){n(t)})})}).catch(n)});return s(n,t),n},setItem:function(e,t,r){return Q.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this;e=l(e);var n=new a(function(t,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){G(r,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){n(t)})})}).catch(n)});return s(n,t),n},clear:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){G(t,n,"DELETE FROM "+n.storeName,[],function(){e()},function(e,t){r(t)})})}).catch(r)});return s(r,e),r},length:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){G(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(t,r){e(r.rows.item(0).c)},function(e,t){r(t)})})}).catch(r)});return s(r,e),r},key:function(e,t){var r=this,n=new a(function(t,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){G(r,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,r){t(r.rows.length?r.rows.item(0).key:null)},function(e,t){n(t)})})}).catch(n)});return s(n,t),n},keys:function(e){var t=this,r=new a(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){G(t,n,"SELECT key FROM "+n.storeName,[],function(t,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).key);e(n)},function(e,t){r(t)})})}).catch(r)});return s(r,e),r},dropInstance:function(e,t){t=c.apply(this,arguments);var r,n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var i=this;return s(r=e.name?new a(function(t){var r;(r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName)?t({db:r,storeNames:[e.storeName]}):t(new a(function(e,t){r.transaction(function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).name);e({db:r,storeNames:i})},function(e,r){t(r)})},function(e){t(e)})}))}).then(function(e){return new a(function(t,r){e.db.transaction(function(n){for(var i=[],o=0,s=e.storeNames.length;o<s;o++)i.push(function(e){return new a(function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){r(t)})})}(e.storeNames[o]));a.all(i).then(function(){t()}).catch(function(e){r(e)})},function(e){r(e)})})}):a.reject("Invalid arguments"),t),r}};function Y(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}var Z={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return(t.keyPrefix=Y(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0)?(this._dbInfo=t,t.serializer=J,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then(function(){for(var t=r._dbInfo,n=t.keyPrefix,i=n.length,o=localStorage.length,a=1,s=0;s<o;s++){var f=localStorage.key(s);if(0===f.indexOf(n)){var l=localStorage.getItem(f);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,f.substring(i),a++)))return l}}});return s(n,t),n},getItem:function(e,t){var r=this;e=l(e);var n=r.ready().then(function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n});return s(n,t),n},setItem:function(e,t,r){var n=this;e=l(e);var i=n.ready().then(function(){void 0===t&&(t=null);var r=t;return new a(function(i,o){var a=n._dbInfo;a.serializer.serialize(t,function(t,n){if(n)o(n);else try{localStorage.setItem(a.keyPrefix+e,t),i(r)}catch(e){("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&o(e),o(e)}})})});return s(i,r),i},removeItem:function(e,t){var r=this;e=l(e);var n=r.ready().then(function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return s(n,t),n},clear:function(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}});return s(r,e),r},length:function(e){var t=this.keys().then(function(e){return e.length});return s(t,e),t},key:function(e,t){var r=this,n=r.ready().then(function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t});return s(n,t),n},keys:function(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo,r=localStorage.length,n=[],i=0;i<r;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&n.push(o.substring(e.keyPrefix.length))}return n});return s(r,e),r},dropInstance:function(e,t){if(t=c.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r,n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var i=this;return s(r=e.name?new a(function(t){t(e.storeName?Y(e,i._defaultConfig):e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}}):a.reject("Invalid arguments"),t),r}},ee=function(e,t){for(var r,n=e.length,i=0;i<n;){if((r=e[i])===t||"number"==typeof r&&"number"==typeof t&&isNaN(r)&&isNaN(t))return!0;i++}return!1},et=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},er={},en={},ei={INDEXEDDB:B,WEBSQL:X,LOCALSTORAGE:Z},eo=[ei.INDEXEDDB._driver,ei.WEBSQL._driver,ei.LOCALSTORAGE._driver],ea=["dropInstance"],es=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ea),ef={description:"",driver:eo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function el(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(et(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}t.exports=new(function(){function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");for(var r in ei)if(ei.hasOwnProperty(r)){var n=ei[r],i=n._driver;this[r]=i,er[i]||this.defineDriver(n)}this._defaultConfig=el({},ef),this._config=el({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if((void 0===e?"undefined":n(e))==="object"){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new a(function(t,r){try{var n=e._driver,i=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(i);for(var o=es.concat("_initStorage"),f=0,l=o.length;f<l;f++){var c=o[f];if((!ee(ea,c)||e[c])&&"function"!=typeof e[c])return void r(i)}for(var u=function(e){return function(){var t=Error("Method "+e+" is not implemented by the current driver"),r=a.reject(t);return s(r,arguments[arguments.length-1]),r}},d=0,h=ea.length;d<h;d++){var p=ea[d];e[p]||(e[p]=u(p))}var v=function(r){er[n]&&console.info("Redefining LocalForage driver: "+n),er[n]=e,en[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(v,r):v(!!e._support):v(!0)}catch(e){r(e)}});return f(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=er[e]?a.resolve(er[e]):a.reject(Error("Driver not found."));return f(n,t,r),n},e.prototype.getSerializer=function(e){var t=a.resolve(J);return f(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return f(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;et(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){n._config.driver=n.driver()}function s(e){return n._extend(e),o(),n._ready=n._initStorage(n._config),n._ready}var l=null!==this._driverSet?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=l.then(function(){var e=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then(function(e){n._driver=e._driver,o(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(){var e=0;return function t(){for(;e<i.length;){var r=i[e];return e++,n._dbInfo=null,n._ready=null,n.getDriver(r).then(s).catch(t)}o();var f=Error("No available storage method found.");return n._driverSet=a.reject(f),n._driverSet}()}})}).catch(function(){o();var e=Error("No available storage method found.");return n._driverSet=a.reject(e),n._driverSet}),f(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!en[e]},e.prototype._extend=function(e){el(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=es.length;e<t;e++)!function(e,t){e[t]=function(){var r=arguments;return e.ready().then(function(){return e[t].apply(e,r)})}}(this,es[e])},e.prototype.createInstance=function(t){return new e(t)},e}())},{3:3}]},{},[4])(4)},78:function(e,t,r){"use strict";function n(e){return e.arrayBuffer?e.arrayBuffer():new Promise((t,r)=>{let n=new FileReader;n.addEventListener("loadend",()=>{t(n.result)}),n.addEventListener("error",r),n.readAsArrayBuffer(e)})}async function i(e){return new Uint8Array(await n(e))}function o(e){return"undefined"!=typeof Blob&&e instanceof Blob}function a(e){return"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer}r.d(t,{$1:()=>en}),e=r.hmd(e);let s="undefined"!=typeof process&&process.versions&&void 0!==process.versions.node&&void 0===process.versions.electron;class f{constructor(e){this.typedArray=e instanceof ArrayBuffer||a(e)?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}async getLength(){return this.typedArray.byteLength}async read(e,t){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+e,t)}}class l{constructor(e){this.blob=e}async getLength(){return this.blob.size}async read(e,t){let r=this.blob.slice(e,e+t);return new Uint8Array(await n(r))}async sliceAsBlob(e,t,r=""){return this.blob.slice(e,e+t,r)}}function c(e,t){var r=e.length;if(t<=r)return e;var n=new Uint8Array(Math.max(r<<1,t));return n.set(e,0),n}function u(e,t,r,n,i,o){for(var a=m,s=b,f=0;f<r;){var l=e[s(n,i)&t];i+=15&l;var c=l>>>4;if(c<=15)o[f]=c,f++;else{var u=0,d=0;16==c?(d=3+a(n,i,2),i+=2,u=o[f-1]):17==c?(d=3+a(n,i,3),i+=3):18==c&&(d=11+a(n,i,7),i+=7);for(var h=f+d;f<h;)o[f]=u,f++}}return i}function d(e,t,r,n){for(var i=0,o=0,a=n.length>>>1;o<r;){var s=e[o+t];n[o<<1]=0,n[(o<<1)+1]=s,s>i&&(i=s),o++}for(;o<a;)n[o<<1]=0,n[(o<<1)+1]=0,o++;return i}function h(e,t){for(var r,n,i,o,a,s=e.length,f=g.bl_count,o=0;o<=t;o++)f[o]=0;for(o=1;o<s;o+=2)f[e[o]]++;var l=g.next_code;for(n=1,r=0,f[0]=0;n<=t;n++)r=r+f[n-1]<<1,l[n]=r;for(i=0;i<s;i+=2)0!=(a=e[i+1])&&(e[i]=l[a],l[a]++)}function p(e,t,r){for(var n=e.length,i=g.rev15,o=0;o<n;o+=2)if(0!=e[o+1])for(var a=o>>1,s=e[o+1],f=a<<4|s,l=t-s,c=e[o]<<l,u=c+(1<<l);c!=u;)r[i[c]>>>15-t]=f,c++}function v(e,t){for(var r=g.rev15,n=15-t,i=0;i<e.length;i+=2){var o=e[i]<<t-e[i+1];e[i]=r[o]>>>n}}function m(e,t,r){return(e[t>>>3]|e[(t>>>3)+1]<<8)>>>(7&t)&(1<<r)-1}function y(e,t,r){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(7&t)&(1<<r)-1}function b(e,t){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(7&t)}let g=(w=Uint16Array,E=Uint32Array,{next_code:new w(16),bl_count:new w(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new w(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new E(32),flmap:new w(512),fltree:[],fdmap:new w(32),fdtree:[],lmap:new w(32768),ltree:[],ttree:[],dmap:new w(32768),dtree:[],imap:new w(512),itree:[],rev15:new w(32768),lhst:new E(286),dhst:new E(30),ihst:new E(19),lits:new E(15e3),strt:new w(65536),prev:new w(32768)});for(var w,E,_=0;_<32768;_++){var x=_;x=(0xff00ff00&(x=(0xf0f0f0f0&(x=(0xcccccccc&(x=(0xaaaaaaaa&x)>>>1|(0x55555555&x)<<1))>>>2|(0x33333333&x)<<2))>>>4|(0xf0f0f0f&x)<<4))>>>8|(0xff00ff&x)<<8,g.rev15[_]=(x>>>16|x<<16)>>>17}function S(e,t,r){for(;0!=t--;)e.push(0,r)}for(var _=0;_<32;_++)g.ldef[_]=g.of0[_]<<3|g.exb[_],g.ddef[_]=g.df0[_]<<4|g.dxb[_];S(g.fltree,144,8),S(g.fltree,112,9),S(g.fltree,24,7),S(g.fltree,8,8),h(g.fltree,9),p(g.fltree,9,g.flmap),v(g.fltree,9),S(g.fdtree,32,5),h(g.fdtree,5),p(g.fdtree,5,g.fdmap),v(g.fdtree,5),S(g.itree,19,0),S(g.ltree,286,0),S(g.dtree,30,0),S(g.ttree,320,0);let I={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var r=t,n=0;n<8;n++)1&r?r=0xedb88320^r>>>1:r>>>=1;e[t]=r}return e}(),update:function(e,t,r,n){for(var i=0;i<n;i++)e=I.table[(e^t[r+i])&255]^e>>>8;return e},crc:function(e,t,r){return 0xffffffff^I.update(0xffffffff,e,t,r)}},A={numWorkers:1,workerURL:"",useWorkers:!1},B=0,U=0,N=!0,F=[],L=[],O=[],D=new Map;function j(e){R(e.target);let{id:t,error:r,data:n}=e.data,i=D.get(t);D.delete(t),r?i.reject(r):i.resolve(n)}function k(e){return new Promise((t,r)=>{let n=new Worker(e);n.onmessage=e=>{"start"===e.data?(n.onerror=void 0,n.onmessage=void 0,t(n)):r(Error(`unexpected message: ${e.data}`))},n.onerror=r})}let C=function(){if(!s)return{async createWorker(e){let t;try{return await k(e)}catch(t){console.warn("could not load worker:",e)}try{let r=await fetch(e,{mode:"cors"});if(!r.ok)throw Error(`could not load: ${e}`);t=await r.text(),e=URL.createObjectURL(new Blob([t],{type:"application/javascript"}));let n=await k(e);return A.workerURL=e,n}catch(t){console.warn("could not load worker via fetch:",e)}if(void 0!==t)try{e=`data:application/javascript;base64,${btoa(t)}`;let r=await k(e);return A.workerURL=e,r}catch(e){console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),Error("can not start workers")},addEventListener(e,t){e.addEventListener("message",t)},async terminate(e){e.terminate()}};{var t;let{Worker:r}=(t=e).require?t.require("worker_threads"):{};return{createWorker:async e=>new r(e),addEventListener(e,t){e.on("message",r=>{t({target:e,data:r})})},async terminate(e){await e.terminate()}}}}();function R(e){L.push(e),z()}async function M(){if(0===L.length&&U<A.numWorkers){++U;try{let e=await C.createWorker(A.workerURL);F.push(e),L.push(e),C.addEventListener(e,j)}catch(e){N=!1}}return L.pop()}async function z(){if(0!==O.length){if(A.useWorkers&&N){let e=await M();if(N){if(e){if(0===O.length)return void R(e);let{id:t,src:r,uncompressedSize:n,type:i,resolve:o,reject:a}=O.shift();D.set(t,{id:t,resolve:o,reject:a}),e.postMessage({type:"inflate",data:{id:t,type:i,src:r,uncompressedSize:n}},[])}return}}for(;O.length;){let{src:e,uncompressedSize:t,type:r,resolve:n}=O.shift(),a=e;o(e)&&(a=await i(e)),function(e,t,r,n){let i=new Uint8Array(t);!function(e,t){var r,n,i=Uint8Array;if(3==e[0]&&0==e[1])return t||new i(0);var o=m,a=b,s=null==t;s&&(t=new i(e.length>>>2<<3));for(var f=0,l=0,v=0,w=0,E=0,_=0,x=0,S=0,I=0;0==f;){if(f=y(e,I,1),l=y(e,I+1,2),I+=3,0==l){(7&I)!=0&&(I+=8-(7&I));var A=(I>>>3)+4,B=e[A-4]|e[A-3]<<8;s&&(t=c(t,S+B)),t.set(new i(e.buffer,e.byteOffset+A,B),S),I=A+B<<3,S+=B;continue}if(s&&(t=c(t,S+131072)),1==l&&(r=g.flmap,n=g.fdmap,_=511,x=31),2==l){v=o(e,I,5)+257,w=o(e,I+5,5)+1,E=o(e,I+10,4)+4,I+=14;for(var U=0;U<38;U+=2)g.itree[U]=0,g.itree[U+1]=0;for(var N=1,U=0;U<E;U++){var F=o(e,I+3*U,3);g.itree[(g.ordr[U]<<1)+1]=F,F>N&&(N=F)}I+=3*E,h(g.itree,N),p(g.itree,N,g.imap),r=g.lmap,n=g.dmap,I=u(g.imap,(1<<N)-1,v+w,e,I,g.ttree);var L=d(g.ttree,0,v,g.ltree);_=(1<<L)-1;var O=d(g.ttree,v,w,g.dtree);x=(1<<O)-1,h(g.ltree,L),p(g.ltree,L,r),h(g.dtree,O),p(g.dtree,O,n)}for(;;){var D=r[a(e,I)&_];I+=15&D;var j=D>>>4;if(j>>>8==0)t[S++]=j;else if(256==j)break;else{var k=S+j-254;if(j>264){var C=g.ldef[j-257];k=S+(C>>>3)+o(e,I,7&C),I+=7&C}var R=n[a(e,I)&x];I+=15&R;var M=R>>>4,z=g.ddef[M],T=(z>>>4)+y(e,I,15&z);for(I+=15&z,s&&(t=c(t,S+131072));S<k;)t[S]=t[S++-T],t[S]=t[S++-T],t[S]=t[S++-T],t[S]=t[S++-T];S=k}}}t.length==S||t.slice(0,S)}(e,i),n(r?new Blob([i],{type:r}):i.buffer)}(a,t,r,n)}}}function T(e,t,r){return new Promise((n,i)=>{O.push({src:e,uncompressedSize:t,type:r,resolve:n,reject:i,id:B++}),z()})}class P{constructor(e,t){this._reader=e,this._rawEntry=t,this.name=t.name,this.nameBytes=t.nameBytes,this.size=t.uncompressedSize,this.compressedSize=t.compressedSize,this.comment=t.comment,this.commentBytes=t.commentBytes,this.compressionMethod=t.compressionMethod,this.lastModDate=function(e,t){return new Date((e>>9&127)+1980,(e>>5&15)-1,31&e,t>>11&31,t>>5&63,(31&t)*2,0)}(t.lastModFileDate,t.lastModFileTime),this.isDirectory=0===t.uncompressedSize&&t.name.endsWith("/"),this.encrypted=!!(1&t.generalPurposeBitFlag),this.externalFileAttributes=t.externalFileAttributes,this.versionMadeBy=t.versionMadeBy}async blob(e="application/octet-stream"){return await et(this._reader,this._rawEntry,e)}async arrayBuffer(){return await ee(this._reader,this._rawEntry)}async text(){return G(new Uint8Array(await this.arrayBuffer()))}async json(){return JSON.parse(await this.text())}}async function $(e,t,r){return await e.read(t,r)}async function W(e,t,r,n){return e.sliceAsBlob?await e.sliceAsBlob(t,r,n):await e.read(t,r)}let q=()=>0;function H(e,t){return e[t]+256*e[t+1]}function V(e,t){return e[t]+256*e[t+1]+65536*e[t+2]+0x1000000*e[t+3]}function J(e,t){return V(e,t)+0x100000000*V(e,t+4)}let K=new TextDecoder;function G(e,t){return a(e.buffer)&&(e=new Uint8Array(e)),K.decode(e)}async function Q(e,t){let r=Math.min(65557,t),n=t-r,i=await $(e,n,r);for(let t=r-22;t>=0;--t){if(0x6054b50!==V(i,t))continue;let r=new Uint8Array(i.buffer,i.byteOffset+t,i.byteLength-t),o=H(r,4);if(0!==o)throw Error(`multi-volume zip files are not supported. This is volume: ${o}`);let a=H(r,10),s=V(r,12),f=V(r,16),l=H(r,20),c=r.length-22;if(l!==c)throw Error(`invalid comment length. expected: ${c}, actual: ${l}`);let u=new Uint8Array(r.buffer,r.byteOffset+22,l),d=G(u);if(65535===a||0xffffffff===f)return await X(e,n+t,d,u);return await Y(e,f,s,a,d,u)}throw Error("could not find end of central directory. maybe not zip file")}async function X(e,t,r,n){let i=await $(e,t-20,20);if(0x7064b50!==V(i,0))throw Error("invalid zip64 end of central directory locator signature");let o=J(i,8),a=await $(e,o,56);if(0x6064b50!==V(a,0))throw Error("invalid zip64 end of central directory record signature");let s=J(a,32),f=J(a,40);return Y(e,J(a,48),f,s,r,n)}async function Y(e,t,r,n,i,o){let a=0,s=await $(e,t,r),f=[];for(let e=0;e<n;++e){let e=s.subarray(a,a+46),t=V(e,0);if(0x2014b50!==t)throw Error(`invalid central directory file header signature: 0x${t.toString(16)}`);let r={versionMadeBy:H(e,4),versionNeededToExtract:H(e,6),generalPurposeBitFlag:H(e,8),compressionMethod:H(e,10),lastModFileTime:H(e,12),lastModFileDate:H(e,14),crc32:V(e,16),compressedSize:V(e,20),uncompressedSize:V(e,24),fileNameLength:H(e,28),extraFieldLength:H(e,30),fileCommentLength:H(e,32),internalFileAttributes:H(e,36),externalFileAttributes:V(e,38),relativeOffsetOfLocalHeader:V(e,42)};if(64&r.generalPurposeBitFlag)throw Error("strong encryption is not supported");a+=46;let n=s.subarray(a,a+r.fileNameLength+r.extraFieldLength+r.fileCommentLength);r.nameBytes=n.slice(0,r.fileNameLength),r.name=G(r.nameBytes);let i=r.fileNameLength+r.extraFieldLength,o=n.slice(r.fileNameLength,i);r.extraFields=[];let l=0;for(;l<o.length-3;){let e=H(o,l+0),t=H(o,l+2),n=l+4,i=n+t;if(i>o.length)throw Error("extra field length exceeds extra field buffer size");r.extraFields.push({id:e,data:o.slice(n,i)}),l=i}if(r.commentBytes=n.slice(i,i+r.fileCommentLength),r.comment=G(r.commentBytes),a+=n.length,0xffffffff===r.uncompressedSize||0xffffffff===r.compressedSize||0xffffffff===r.relativeOffsetOfLocalHeader){let e=r.extraFields.find(e=>1===e.id);if(!e)throw Error("expected zip64 extended information extra field");let t=e.data,n=0;if(0xffffffff===r.uncompressedSize){if(n+8>t.length)throw Error("zip64 extended information extra field does not include uncompressed size");r.uncompressedSize=J(t,n),n+=8}if(0xffffffff===r.compressedSize){if(n+8>t.length)throw Error("zip64 extended information extra field does not include compressed size");r.compressedSize=J(t,n),n+=8}if(0xffffffff===r.relativeOffsetOfLocalHeader){if(n+8>t.length)throw Error("zip64 extended information extra field does not include relative header offset");r.relativeOffsetOfLocalHeader=J(t,n),n+=8}}let c=r.extraFields.find(e=>28789===e.id&&e.data.length>=6&&1===e.data[0]&&V(e.data,1),q(r.nameBytes));if(c&&(r.fileName=G(c.data.slice(5))),0===r.compressionMethod){let e=r.uncompressedSize;if((1&r.generalPurposeBitFlag)!=0&&(e+=12),r.compressedSize!==e)throw Error(`compressed size mismatch for stored file: ${r.compressedSize} != ${e}`)}f.push(r)}return{zip:{comment:i,commentBytes:o},entries:f.map(t=>new P(e,t))}}async function Z(e,t){let r;if(1&t.generalPurposeBitFlag)throw Error("encrypted entries not supported");let n=await $(e,t.relativeOffsetOfLocalHeader,30),i=await e.getLength(),o=V(n,0);if(0x4034b50!==o)throw Error(`invalid local file header signature: 0x${o.toString(16)}`);let a=H(n,26),s=H(n,28),f=t.relativeOffsetOfLocalHeader+n.length+a+s;if(0===t.compressionMethod)r=!1;else if(8===t.compressionMethod)r=!0;else throw Error(`unsupported compression method: ${t.compressionMethod}`);let l=f+t.compressedSize;if(0!==t.compressedSize&&l>i)throw Error(`file data overflows file bounds: ${f} +  ${t.compressedSize}  > ${i}`);return{decompress:r,fileDataStart:f}}async function ee(e,t){let{decompress:r,fileDataStart:n}=await Z(e,t);if(!r){let r=await $(e,n,t.compressedSize);return 0===r.byteOffset&&r.byteLength===r.buffer.byteLength?r.buffer:r.slice().buffer}let i=await W(e,n,t.compressedSize);return await T(i,t.uncompressedSize)}async function et(e,t,r){let{decompress:n,fileDataStart:i}=await Z(e,t);if(!n){let n=await W(e,i,t.compressedSize,r);return o(n)?n:new Blob([a(n.buffer)?new Uint8Array(n):n],{type:r})}let s=await W(e,i,t.compressedSize);return await T(s,t.uncompressedSize,r)}async function er(e){let t;if("undefined"!=typeof Blob&&e instanceof Blob)t=new l(e);else if(e instanceof ArrayBuffer||e&&e.buffer&&e.buffer instanceof ArrayBuffer)t=new f(e);else if(a(e)||a(e.buffer))t=new f(e);else if("string"==typeof e){let r=await fetch(e);if(!r.ok)throw Error(`failed http request ${e}, status: ${r.status}: ${r.statusText}`);t=new l(await r.blob())}else if("function"==typeof e.getLength&&"function"==typeof e.read)t=e;else throw Error("unsupported source type");let r=await t.getLength();if(r>Number.MAX_SAFE_INTEGER)throw Error(`file too large. size: ${r}. Only file sizes up 4503599627370496 bytes are supported`);return await Q(t,r)}async function en(e){let{zip:t,entries:r}=await er(e);return{zip:t,entries:Object.fromEntries(r.map(e=>[e.name,e]))}}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n](o,o.exports,r),o.loaded=!0,o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.rv=()=>"1.5.6",r.ruid="bundler=rspack@1.5.6",(()=>{"use strict";class e extends HTMLElement{create(e,t={},r=null){this.log(`Creating a new Element of ${e}`);let n=document.createElement(e);return Object.keys(t).forEach(e=>{"content"===e?n.innerHTML=t[e]:n.setAttribute(e,t[e])}),null===r?this.appendChild(n):r.appendChild(n),n}event(e,t={}){let r=new CustomEvent(e,{detail:t});this.dispatchEvent(r)}on(e,t){return this.addEventListener(e,e=>{t(e.detail)})}async call(e,t={}){let r=localStorage.getItem("dataroom-token"),n={"Content-Type":"application/json",Authorization:`Bearer ${r}`},i=await fetch(e,{method:"post",headers:n,body:JSON.stringify(t)});if(i.ok)return await i.json();throw Error(i.statusText)}log(e){this.verbose&&console.log(this.id,"says:",e),this.event("status-update",e)}connectedCallback(){"loading"!==document.readyState?this.preInit():document.addEventListener("DOMContentLoaded",()=>this.preInit())}async preInit(){this.content=this.innerText,this.attrs=this.getAttributeNames().reduce((e,t)=>({...e,[t]:this.getAttribute(t)}),{}),this.classList.add("dataroom-element"),this.observeAttributeChanges(),this.attrs["observe-dom"]&&this.observeDomChanges(),this.initialize()}async setAttrs(e){for(let[t,r]of(this.log("setting attrs:",e),Object.entries(e)))await this.setAttribute(t,r);this.render()}observeAttributeChanges(){this.log("observing attribute changes"),this.attributeObserver=new MutationObserver(e=>{e.forEach(e=>{"attributes"===e.type&&(this.attrs[e.attributeName]=this.getAttribute(e.attributeName),this.event("NODE-CHANGED",{attribute:e.attributeName,oldValue:e.oldValue,newValue:this.getAttribute(e.attributeName)}))})}),this.attributeObserver.observe(this,{attributes:!0,attributeOldValue:!0})}observeDomChanges(){this.log("observing DOM changes"),this.domObserver=new MutationObserver(e=>{e.forEach(e=>{"childList"===e.type&&this.event("DOM-CHANGED",{addedNodes:e.addedNodes,removedNodes:e.removedNodes})})}),this.domObserver.observe(this,{childList:!0,subtree:!0})}async initialize(){}disconnectedCallback(){this.log("disconnecting..."),this.disconnect()}async disconnect(){}}customElements.define("file-uploader",class extends e{async initialize(){let e=document.createElement("template");e.innerHTML=`
      <label for="file-input">Select a file:</label>
      <input type="file" id="file-input" />
      <label for="file-name">Name:</label>
      <input type="text" id="file-name" />
      <label for="file-notes">Notes:</label>
      <textarea id="file-notes"></textarea>
      <button id="upload-button">Upload</button>
    `,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e.content.cloneNode(!0));let t=this.shadowRoot.querySelector("#file-input"),r=this.shadowRoot.querySelector("#file-name"),n=this.shadowRoot.querySelector("#file-notes"),i=this.shadowRoot.querySelector("#upload-button");t.addEventListener("change",()=>{let e=t.files&&t.files[0];e&&(r.value=e.name||"",n.value=`${(e.size/1024).toFixed(2)} KB`)}),i.addEventListener("click",()=>{let e=t.files&&t.files[0];if(!e)return;let i=r.value,o=n.value,a=new FileReader;a.readAsDataURL(e),a.onload=()=>{let e=new CustomEvent("fileuploaded",{detail:{fileData:a.result,name:i,notes:o}});this.dispatchEvent(e)}})}});var t=r(790);let n=r.n(t)();customElements.define("file-clerk",class extends e{async initialize(){this.crypto=window.crypto||window.msCrypto,this.hasAttribute("verbose")&&(this.innerHTML=`
        <h1>File Clerk</h1>
        <div class="file-list"></div>
      `,await this.renderFileList())}async saveFile(e,t,r){let i=this.crypto.randomUUID();await n.setItem(i,{filename:e,contents:t,metadata:r}),this.hasAttribute("verbose")&&this.renderFileList()}async deleteFile(e){await n.removeItem(e),this.hasAttribute("verbose")&&this.renderFileList()}async listFiles(){let e=await n.keys();return await Promise.all(e.map(async e=>{let t=await n.getItem(e);return{id:e,filename:t.filename,contents:t.contents,metadata:t.metadata}}))}async openFile(e){let t=new CustomEvent("file-opened",{detail:await n.getItem(e)});this.dispatchEvent(t)}async renderFileList(){if(!this.hasAttribute("verbose"))return;let e=await this.listFiles(),t=this.querySelector(".file-list");t&&(t.innerHTML="",e.forEach(e=>{let r=document.createElement("div"),n=document.createElement("span");n.textContent=e.filename,r.appendChild(n);let i=document.createElement("button");i.textContent="Open",i.addEventListener("click",async()=>{await this.openFile(e.id)}),r.appendChild(i);let o=document.createElement("button");o.textContent="Delete",o.addEventListener("click",async()=>{await this.deleteFile(e.id)}),r.appendChild(o),t.appendChild(r)}))}}),customElements.define("file-viewer",class extends e{openFile(e){let t=e.split(":")[1].split(";")[0];switch(t){case"image/jpeg":case"image/png":this.renderImage(e);break;case"video/mp4":this.renderVideo(e);break;case"audio/mpeg":this.renderAudio(e);break;case"application/pdf":this.renderPdf(e);break;case"text/plain":this.renderText(e);break;default:console.error("Unsupported file type:",t)}}renderImage(e){let t=document.createElement("img");t.src=e,this.clear(),this.appendChild(t)}renderVideo(e){let t=document.createElement("video");t.controls=!0,t.src=e,this.clear(),this.appendChild(t)}renderAudio(e){let t=document.createElement("audio");t.controls=!0,t.src=e,this.clear(),this.appendChild(t)}renderText(e){fetch(e).then(e=>e.text()).then(e=>{let t=document.createElement("pre");t.textContent=e,this.clear(),this.appendChild(t)}).catch(e=>{console.error("Error loading text file:",e)})}renderPdf(e){let t=document.createElement("embed");t.src=e,t.type="application/pdf",this.clear(),this.appendChild(t)}clear(){for(;this.firstChild;)this.removeChild(this.firstChild)}}),customElements.define("file-splitter",class extends e{async initialize(){}splitFiles(e){let t=Math.ceil(e.length/14e3),r=[];for(let n=0;n<t;n++){let t=14e3*n,i=(n+1)*14e3,o={index:n,data:e.slice(t,i)};r.push(o)}return r}joinFiles(e){e.sort((e,t)=>e.index-t.index);let t="";for(let r=0;r<e.length;r++)t+=e[r].data;return t}}),"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(e,t,r){let n=Number(4294967295n&t),i=Number(t>>32n);this.setUint32(e+4*!r,n,r),this.setUint32(e+4*!!r,i,r)}});var i=e=>new DataView(new ArrayBuffer(e)),o=e=>new Uint8Array(e.buffer||e),a=e=>(new TextEncoder).encode(String(e)),s=e=>Math.min(0xffffffff,Number(e)),f=e=>Math.min(65535,Number(e));function l(e,t=e){return new ReadableStream({async pull(t){let r=0;for(;t.desiredSize>r;){let i=await e.next();if(!i.value){t.close();break}{var n;let e="string"==typeof(n=i.value)?a(n):n instanceof Uint8Array?n:o(n);t.enqueue(e),r+=e.byteLength}}},cancel(e){t.throw?.(e)}})}function c(e,t,r){var n,i;let[s,f]=t?t instanceof Uint8Array?[t,1]:ArrayBuffer.isView(t)||t instanceof ArrayBuffer?[o(t),1]:[a(t),0]:[void 0,0];if(e instanceof File)return{i:u(s||a(e.name)),o:BigInt(e.size),u:f};if(e instanceof Response){let t=e.headers.get("content-disposition"),n=t&&t.match(/;\s*filename\*?\s*=\s*(?:UTF-\d+''|)["']?([^;"'\r\n]*)["']?(?:;|$)/i),i=n&&n[1]||e.url&&new URL(e.url).pathname.split("/").findLast(Boolean),o=i&&decodeURIComponent(i),l=r||+e.headers.get("content-length");return{i:u(s||a(o)),o:BigInt(l),u:f}}return s=u(s,void 0!==e||void 0!==r),"string"==typeof e?{i:s,o:BigInt(a(e).length),u:f}:e instanceof Blob?{i:s,o:BigInt(e.size),u:f}:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?{i:s,o:BigInt(e.byteLength),u:f}:{i:s,o:(n=e,(i=r)>-1?BigInt(i):n?void 0:0n),u:f}}function u(e,t=1){if(!e||e.every(e=>47===e))throw Error("The file must have a name.");if(t)for(;47===e[e.length-1];)e=e.subarray(0,-1);else 47!==e[e.length-1]&&(e=new Uint8Array([...e,47]));return e}var d=new Uint32Array(256);for(let e=0;e<256;++e){let t=e;for(let e=0;e<8;++e)t=t>>>1^(1&t&&0xedb88320);d[e]=t}function h(e,t=0){t=~t;for(var r=0,n=e.length;r<n;r++)t=t>>>8^d[255&t^e[r]];return~t>>>0}function p(e,t,r=0){let n=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,i=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;t.setUint16(r,n,1),t.setUint16(r+2,i,1)}var v=new TextDecoder("utf8",{fatal:1});async function*m(e){let{bytes:t}=e;if("then"in t&&(t=await t),t instanceof Uint8Array)yield t,e.l=h(t,0),e.o=BigInt(t.length);else{e.o=0n;let r=t.getReader();for(;;){let{value:t,done:n}=await r.read();if(n)break;e.l=h(t,e.l),e.o+=BigInt(t.length),yield t}}}function y(e){return e instanceof File||e instanceof Response?[[e],[e]]:[[e.input,e.name,e.size],[e.input,e.lastModified,e.mode]]}var b=r(78);customElements.define("file-archive",class extends e{async initialize(){let e=this.getAttribute("target")||"#file_clerk";if(this._targetSelector=e,this.hasAttribute("verbose")){this.innerHTML="";let e=document.createElement("div");e.style.display="flex",e.style.gap="0.5rem",e.style.alignItems="center";let t=document.createElement("button");t.textContent="Export ZIP",t.addEventListener("click",()=>this.exportArchive());let r=document.createElement("button");r.textContent="Import ZIP",r.addEventListener("click",()=>n.click());let n=document.createElement("input");n.type="file",n.accept=".zip",n.style.display="none",n.addEventListener("change",async()=>{let e=n.files&&n.files[0];if(e)try{await this.importArchive(e),this.log("Import complete")}catch(e){console.error(e),alert(`Import failed: ${e.message||e}`)}finally{n.value=""}}),e.appendChild(t),e.appendChild(r),e.appendChild(n),this.appendChild(e)}}get fileClerk(){let e=this._targetSelector||"#file_clerk";return document.querySelector(e)}async exportArchive(){let e=this.fileClerk;if(!e||"function"!=typeof e.listFiles)throw Error("File Clerk not found or not ready");let t=await e.listFiles(),r={version:1,generatedAt:new Date().toISOString(),files:t.map(e=>({id:e.id,filename:e.filename,metadata:e.metadata,mimeType:this.parseMimeFromDataUrl(e.contents)||void 0}))},n=await Promise.all(t.map(async e=>{let t=await this.dataUrlToBlob(e.contents),r=e.filename||"file";return{name:`files/${e.id}/${r}`,input:t,lastModified:new Date}}));n.push({name:"manifest.json",input:new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),lastModified:new Date});let u=await (function(e,t={}){let r={"Content-Type":"application/zip","Content-Disposition":"attachment"};return("bigint"==typeof t.length||Number.isInteger(t.length))&&t.length>0&&(r["Content-Length"]=String(t.length)),t.metadata&&(r["Content-Length"]=String(function(e){let t=BigInt(22),r=0n,n=0;for(let i of e){if(!i.i)throw Error("Every file must have a non-empty name.");if(void 0===i.o)throw Error(`Missing size for file "${(new TextDecoder).decode(i.i)}".`);let e=i.o>=4294967295n,o=r>=4294967295n;r+=BigInt(46+i.i.length+(e&&8))+i.o,t+=BigInt(i.i.length+46+(12*o|28*e)),n||(n=e)}return(n||r>=4294967295n)&&(t+=BigInt(76)),t+r}(function*(e){for(let t of e)yield c(...y(t)[0])}(t.metadata)))),new Response(function(e,t={}){let r,n=(r=e[Symbol.iterator in e?Symbol.iterator:Symbol.asyncIterator](),{async next(){let e=await r.next();if(e.done)return e;let[t,n]=y(e.value);return{done:0,value:Object.assign(function(e,t,r){void 0===t||t instanceof Date||(t=new Date(t));let n=void 0!==e;if(r||(r=n?436:509),e instanceof File)return{isFile:n,t:t||new Date(e.lastModified),bytes:e.stream(),mode:r};if(e instanceof Response)return{isFile:n,t:t||new Date(e.headers.get("Last-Modified")||Date.now()),bytes:e.body,mode:r};if(void 0===t)t=new Date;else if(isNaN(t))throw Error("Invalid modification date.");if(!n)return{isFile:n,t:t,mode:r};if("string"==typeof e)return{isFile:n,t:t,bytes:a(e),mode:r};if(e instanceof Blob)return{isFile:n,t:t,bytes:e.stream(),mode:r};if(e instanceof Uint8Array||e instanceof ReadableStream)return{isFile:n,t:t,bytes:e,mode:r};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{isFile:n,t:t,bytes:o(e),mode:r};if(Symbol.asyncIterator in e)return{isFile:n,t:t,bytes:l(e[Symbol.asyncIterator]()),mode:r};throw TypeError("Unsupported input format.")}(...n),c(...t))}},throw:r.throw?.bind(r),[Symbol.asyncIterator](){return this}});return l(async function*(e,t){let r=[],n=0n,a=0n,l=0;for await(let f of e){let e=function({i:e,u:t},r){return 8*(!t||(r??function(e){try{v.decode(e)}catch{return 0}return 1}(e)))}(f,t.buffersAreUTF8);yield function(e,t=0){let r=i(30);return r.setUint32(0,0x504b0304),r.setUint32(4,0x2d000800|t),p(e.t,r,10),r.setUint16(26,e.i.length,1),o(r)}(f,e),yield new Uint8Array(f.i),f.isFile&&(yield*m(f));let c=f.o>=4294967295n,u=12*(n>=4294967295n)|28*c;yield function(e,t){let r=i(16+8*!!t);return r.setUint32(0,0x504b0708),r.setUint32(4,e.isFile?e.l:0,1),t?(r.setBigUint64(8,e.o,1),r.setBigUint64(16,e.o,1)):(r.setUint32(8,s(e.o),1),r.setUint32(12,s(e.o),1)),o(r)}(f,c),r.push(function(e,t,r=0,n=0){let a=i(46);return a.setUint32(0,0x504b0102),a.setUint32(4,0x2d032d00),a.setUint16(8,2048|r),p(e.t,a,12),a.setUint32(16,e.isFile?e.l:0,1),a.setUint32(20,s(e.o),1),a.setUint32(24,s(e.o),1),a.setUint16(28,e.i.length,1),a.setUint16(30,n,1),a.setUint16(40,e.mode|(e.isFile?32768:16384),1),a.setUint32(42,s(t),1),o(a)}(f,n,e,u)),r.push(f.i),u&&r.push(function(e,t,r){let n=i(r);return n.setUint16(0,1,1),n.setUint16(2,r-4,1),16&r&&(n.setBigUint64(4,e.o,1),n.setBigUint64(12,e.o,1)),n.setBigUint64(r-8,t,1),o(n)}(f,n,u)),c&&(n+=8n),a++,n+=BigInt(46+f.i.length)+f.o,l||(l=c)}let c=0n;for(let e of r)yield e,c+=BigInt(e.length);if(l||n>=4294967295n){let e=i(76);e.setUint32(0,0x504b0606),e.setBigUint64(4,BigInt(44),1),e.setUint32(12,0x2d032d00),e.setBigUint64(24,a,1),e.setBigUint64(32,a,1),e.setBigUint64(40,c,1),e.setBigUint64(48,n,1),e.setUint32(56,0x504b0607),e.setBigUint64(64,n+c,1),e.setUint32(72,1,1),yield o(e)}let u=i(22);u.setUint32(0,0x504b0506),u.setUint16(8,f(a),1),u.setUint16(10,f(a),1),u.setUint32(12,s(c),1),u.setUint32(16,s(n),1),yield o(u)}(n,t),n)}(e,t),{headers:r})})(n).blob();this.triggerDownload(u,`file-clerk-archive-${this.timestamp()}.zip`)}async importArchive(e){let t=this.fileClerk;if(!t||"function"!=typeof t.saveFile)throw Error("File Clerk not found or not ready");let{entries:r}=await (0,b.$1)(e),n=r["manifest.json"],i=null;if(n&&(i=JSON.parse(await n.text())),i&&Array.isArray(i.files))for(let e of i.files){let n=`files/${e.id}/${e.filename||"file"}`,i=r[n];if(!i){console.warn(`Missing entry in archive: ${n}`);continue}let o=await i.blob(),a=await this.blobToDataUrl(o),s=this.ensureDataUrlMime(a,e.mimeType);await t.saveFile(e.filename,s,e.metadata)}else for(let e of Object.keys(r).filter(e=>e.startsWith("files/")&&!e.endsWith("/"))){let n=r[e],i=e.split("/").slice(-1)[0]||"file",o=await n.blob(),a=await this.blobToDataUrl(o),s=this.guessMimeFromFilename(i),f=this.ensureDataUrlMime(a,s);await t.saveFile(i,f,{})}t.hasAttribute&&t.hasAttribute("verbose")&&"function"==typeof t.renderFileList&&await t.renderFileList()}async dataUrlToBlob(e){let t=await fetch(e);return await t.blob()}async blobToDataUrl(e){return await new Promise((t,r)=>{let n=new FileReader;n.onload=()=>t(n.result),n.onerror=r,n.readAsDataURL(e)})}parseMimeFromDataUrl(e){let t=/^data:([^;]+);/i.exec(e||"");return t?t[1]:""}ensureDataUrlMime(e,t){if(!t)return e;let r=this.parseMimeFromDataUrl(e);return r&&"application/octet-stream"!==r?e:e.replace(/^data:[^;]*;base64,/,`data:${t};base64,`)}guessMimeFromFilename(e=""){switch(e.split(".").pop().toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"webp":return"image/webp";case"mp4":return"video/mp4";case"mp3":return"audio/mpeg";case"wav":return"audio/wav";case"pdf":return"application/pdf";case"txt":return"text/plain";case"json":return"application/json";default:return""}}triggerDownload(e,t){let r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(r)}timestamp(){let e=new Date,t=e=>String(e).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}_${t(e.getHours())}-${t(e.getMinutes())}-${t(e.getSeconds())}`}})})()})();
//# sourceMappingURL=file-clerk.min.js.map